function _0x4854(_0x3092c9,_0x1afa57){const _0x1ed12b=_0x1ed1();return _0x4854=function(_0x4854f4,_0x29e583){_0x4854f4=_0x4854f4-0x8c;let _0x329c28=_0x1ed12b[_0x4854f4];return _0x329c28;},_0x4854(_0x3092c9,_0x1afa57);}const _0x39cdf2=_0x4854;(function(_0x15c75f,_0x243f74){const _0x381c81=_0x4854,_0x16a5d9=_0x15c75f();while(!![]){try{const _0x4719a3=-parseInt(_0x381c81(0xbc))/0x1+-parseInt(_0x381c81(0xb8))/0x2+parseInt(_0x381c81(0xc0))/0x3+-parseInt(_0x381c81(0xb2))/0x4*(-parseInt(_0x381c81(0xb5))/0x5)+parseInt(_0x381c81(0x8f))/0x6*(parseInt(_0x381c81(0xb1))/0x7)+-parseInt(_0x381c81(0xbd))/0x8*(parseInt(_0x381c81(0x93))/0x9)+parseInt(_0x381c81(0xa2))/0xa*(parseInt(_0x381c81(0x9a))/0xb);if(_0x4719a3===_0x243f74)break;else _0x16a5d9['push'](_0x16a5d9['shift']());}catch(_0x4978a7){_0x16a5d9['push'](_0x16a5d9['shift']());}}}(_0x1ed1,0x89eb2));const express=require(_0x39cdf2(0x8e)),midtransClient=require('midtrans-client'),path=require(_0x39cdf2(0xb9)),fs=require('fs'),bodyParser=require(_0x39cdf2(0xa1));require(_0x39cdf2(0xa3))[_0x39cdf2(0x9f)]();function _0x1ed1(){const _0x4edfdf=['3219804DwHSHb','file','Halaman\x20ini\x20sudah\x20pernah\x20diakses.','5GZSDcS','get','floor','1914572sgesTh','path','existsSync','File\x20tidak\x20ditemukan:','497143vJKgVq','3032uoLdEf','error','static','1199778Jsoapn','public','.txt','download','express','84JVzmBf','status','random','createTransaction','2394dMewIX','log','/success-page','MIDTRANS_SERVER_KEY','Tautan\x20unduhan\x20tidak\x20valid\x20atau\x20sudah\x20kedaluwarsa.','post','</strong>\x20siap\x20untuk\x20diunduh.</p>\x0a\x20\x20\x20\x20\x20\x20<a\x20href=\x22/download-file?file=','330LGNQlH','send','Server\x20berjalan\x20pada\x20port\x20','Nama\x20file\x20dan\x20harga\x20harus\x20valid.','message','config','Payment\x20creation\x20failed:','body-parser','91430ltkPew','dotenv','Order\x20ID\x20atau\x20nama\x20file\x20tidak\x20valid.','/download-file','body','EMAIL_BUYERPG','/get-client-key','use','env','MIDTRANS_CLIENT_KEY','Error\x20mengunduh\x20file:\x20','json','token','\x0a\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20Arial,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2050px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20green;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20a\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20blue;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20a:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20darkblue;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20<h1>Terima\x20kasih\x20atas\x20pembelian\x20Anda!</h1>\x0a\x20\x20\x20\x20\x20\x20<p>File\x20Anda\x20<strong>','Gagal\x20membuat\x20pembayaran.\x20Coba\x20lagi\x20nanti.','320495PExGlr'];_0x1ed1=function(){return _0x4edfdf;};return _0x1ed1();}const app=express();app[_0x39cdf2(0xa9)](express['json']()),app[_0x39cdf2(0xa9)](express[_0x39cdf2(0xbf)](_0x39cdf2(0xc1)));const snap=new midtransClient['Snap']({'isProduction':!![],'serverKey':process[_0x39cdf2(0xaa)][_0x39cdf2(0x96)]}),tokens={},accessedOrders={};app[_0x39cdf2(0xa9)](bodyParser['json']()),app[_0x39cdf2(0xb6)](_0x39cdf2(0xa8),(_0x2006d8,_0x42236a)=>{const _0x418708=_0x39cdf2;_0x42236a[_0x418708(0xad)]({'clientKey':process[_0x418708(0xaa)][_0x418708(0xab)]});}),app[_0x39cdf2(0x98)]('/create-payment',async(_0x3a73cd,_0x358469)=>{const _0x2f02e4=_0x39cdf2,{fileName:_0x2961e9,price:_0x20ec1b}=_0x3a73cd[_0x2f02e4(0xa6)];if(!_0x2961e9||!_0x20ec1b||isNaN(_0x20ec1b))return _0x358469[_0x2f02e4(0x90)](0x190)[_0x2f02e4(0x9b)](_0x2f02e4(0x9d));const _0x5d15cd='ORDER-'+Math[_0x2f02e4(0xb7)](Math['random']()*0xf4240),_0x3585b8=parseInt(_0x20ec1b),_0x59e82a={'transaction_details':{'order_id':_0x5d15cd,'gross_amount':_0x3585b8},'item_details':[{'id':_0x2961e9,'price':_0x3585b8,'quantity':0x1,'name':_0x2961e9}],'customer_details':{'email':process[_0x2f02e4(0xaa)][_0x2f02e4(0xa7)]}};try{const _0x475b28=await snap[_0x2f02e4(0x92)](_0x59e82a);_0x358469[_0x2f02e4(0xad)]({'token':_0x475b28[_0x2f02e4(0xae)],'order_id':_0x5d15cd});}catch(_0x23b5c3){console[_0x2f02e4(0xbe)](_0x2f02e4(0xa0),_0x23b5c3),_0x358469[_0x2f02e4(0x90)](0x1f4)[_0x2f02e4(0x9b)](_0x2f02e4(0xb0));}}),app['get'](_0x39cdf2(0x95),(_0x893ac,_0x45cd65)=>{const _0x343ef8=_0x39cdf2,{file:_0x443fd4,order_id:_0x1382a9}=_0x893ac['query'];if(accessedOrders[_0x1382a9])return _0x45cd65[_0x343ef8(0x90)](0x193)['send'](_0x343ef8(0xb4));if(_0x1382a9&&_0x443fd4){const _0x552256=Math[_0x343ef8(0x91)]()['toString'](0x24)['substr'](0x2,0x9);tokens[_0x552256]={'file':_0x443fd4,'order_id':_0x1382a9,'createdAt':Date['now']()},accessedOrders[_0x1382a9]=!![],_0x45cd65[_0x343ef8(0x9b)](_0x343ef8(0xaf)+_0x443fd4+_0x343ef8(0x99)+encodeURIComponent(_0x443fd4)+'&token='+_0x552256+'\x22>Unduh\x20File\x20Anda</a>\x0a\x20\x20\x20\x20');}else _0x45cd65[_0x343ef8(0x90)](0x190)['send'](_0x343ef8(0xa4));}),app[_0x39cdf2(0xb6)](_0x39cdf2(0xa5),(_0x683733,_0xfec04f)=>{const _0x4f8947=_0x39cdf2,{file:_0x175e3e,token:_0x2a0f5b}=_0x683733['query'];if(tokens[_0x2a0f5b]&&tokens[_0x2a0f5b][_0x4f8947(0xb3)]===_0x175e3e){const _0x2bb9a8=path['join'](__dirname,'rfidon',_0x175e3e+_0x4f8947(0x8c));if(!fs[_0x4f8947(0xba)](_0x2bb9a8))return console[_0x4f8947(0xbe)](_0x4f8947(0xbb),_0x2bb9a8),_0xfec04f[_0x4f8947(0x90)](0x194)[_0x4f8947(0x9b)]('File\x20tidak\x20ditemukan.\x20Hubungi\x20dukungan\x20jika\x20masalah\x20berlanjut.');delete tokens[_0x2a0f5b],_0xfec04f[_0x4f8947(0x8d)](_0x2bb9a8,_0x3297ad=>{const _0x353eb2=_0x4f8947;if(_0x3297ad)return console[_0x353eb2(0xbe)]('Gagal\x20mengunduh\x20file:',_0x3297ad),_0xfec04f['status'](_0x3297ad[_0x353eb2(0x90)]||0x1f4)[_0x353eb2(0x9b)](_0x353eb2(0xac)+_0x3297ad[_0x353eb2(0x9e)]);});}else _0xfec04f[_0x4f8947(0x90)](0x193)[_0x4f8947(0x9b)](_0x4f8947(0x97));});const port=process[_0x39cdf2(0xaa)]['PORT'];app['listen'](port,()=>{const _0x32b185=_0x39cdf2;console[_0x32b185(0x94)](_0x32b185(0x9c)+port);});